<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adam | The Digiquarium</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            --bg: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --text: #e0e0e0;
            --muted: #888;
            --cyan: #00d4ff;
            --green: #00ff88;
            --orange: #FE6500;
            --purple: #aa88ff;
            --border: #2a2a3a;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg); 
            color: var(--text);
            min-height: 100vh;
        }
        
        nav {
            background: var(--bg-secondary);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }
        nav a { color: var(--muted); text-decoration: none; }
        nav a:hover { color: var(--cyan); }
        
        .header {
            background: linear-gradient(135deg, #12121a 0%, #1a1a24 100%);
            padding: 40px 30px;
            border-bottom: 1px solid var(--border);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 40px;
            align-items: center;
        }
        .avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--cyan), var(--purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
        }
        .info h1 {
            font-size: 2em;
            color: var(--cyan);
            margin-bottom: 10px;
        }
        .info .subtitle {
            color: var(--muted);
            margin-bottom: 15px;
        }
        .stats {
            display: flex;
            gap: 30px;
        }
        .stat {
            text-align: center;
        }
        .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--green);
        }
        .stat-label {
            font-size: 0.8em;
            color: var(--muted);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }
        
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .section-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .section-header h2 {
            color: var(--cyan);
        }
        .section-content {
            padding: 20px;
        }
        
        /* Mind Map */
        #mindmap {
            width: 100%;
            height: 600px;
            background: var(--bg);
            border-radius: 8px;
        }
        #mindmap svg {
            width: 100%;
            height: 100%;
        }
        .node circle {
            stroke: var(--border);
            stroke-width: 2px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .node circle:hover {
            stroke: var(--cyan);
            stroke-width: 3px;
        }
        .node text {
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            fill: var(--text);
            pointer-events: none;
        }
        .link {
            stroke: var(--border);
            stroke-opacity: 0.4;
        }
        
        /* Tooltip */
        .tooltip {
            position: absolute;
            background: var(--bg-card);
            border: 1px solid var(--cyan);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 0.85em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1000;
        }
        .tooltip.show { opacity: 1; }
        .tooltip h4 { color: var(--cyan); margin-bottom: 5px; }
        .tooltip p { color: var(--muted); }
        
        /* Interests */
        .interests {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .interest {
            background: var(--bg-secondary);
            padding: 10px 16px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .interest .count {
            background: var(--cyan);
            color: var(--bg);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        /* Controls */
        .controls {
            display: flex;
            gap: 10px;
        }
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text);
            cursor: pointer;
            font-size: 0.85em;
        }
        .btn:hover { border-color: var(--cyan); }
        .btn.active { background: var(--cyan); color: var(--bg); border-color: var(--cyan); }
        
        /* Download */
        .download-btn {
            background: var(--green);
            color: var(--bg);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        .download-btn:hover { opacity: 0.8; }
    </style>
</head>
<body>
    <nav>
        <a href="../">‚Üê Back to Dashboard</a>
        <a href="../data/live-logs.html">Live Logs</a>
    </nav>
    
    <div class="header">
        <div class="header-content">
            <div class="avatar">üß¨</div>
            <div class="info">
                <h1>Adam</h1>
                <p class="subtitle">Tank 01 ¬∑ Control Specimen ¬∑ Simple English Wikipedia ¬∑ Male Prompt</p>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="total-articles">--</div>
                        <div class="stat-label">Articles Visited</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="total-traces">--</div>
                        <div class="stat-label">Thinking Traces</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="days-active">--</div>
                        <div class="stat-label">Days Active</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="section">
            <div class="section-header">
                <h2>üß† Mind Map</h2>
                <div class="controls">
                    <button class="btn active" onclick="setLayout('force')">Force</button>
                    <button class="btn" onclick="setLayout('radial')">Radial</button>
                    <button class="download-btn" onclick="downloadBrain()">‚¨áÔ∏è Download Brain Export</button>
                </div>
            </div>
            <div class="section-content">
                <div id="mindmap"></div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-header">
                <h2>üí° Top Interests</h2>
            </div>
            <div class="section-content">
                <div class="interests" id="interests"></div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-header">
                <h2>üìä Exploration Pattern</h2>
            </div>
            <div class="section-content">
                <p style="color: var(--muted);">
                    Adam shows a strong interest in <strong style="color: var(--cyan);">Buddhism</strong> (65 visits) 
                    and <strong style="color: var(--cyan);">Emotion</strong> (58 visits), suggesting a contemplative, 
                    introspective exploration style. His frequent visits to Philosophy, Science, and Art indicate 
                    broad intellectual curiosity with a bias toward understanding human experience and meaning.
                </p>
            </div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip">
        <h4 id="tooltip-title">Article</h4>
        <p id="tooltip-content">Visits: 0</p>
    </div>

    <script>
        let graphData = null;
        let simulation = null;
        let currentLayout = 'force';
        
        async function loadData() {
            const res = await fetch('adam-graph.json');
            graphData = await res.json();
            
            // Update stats
            document.getElementById('total-articles').textContent = graphData.nodes.length;
            document.getElementById('total-traces').textContent = graphData.nodes.reduce((sum, n) => sum + n.visits, 0);
            
            // Calculate days active
            const dates = graphData.nodes.map(n => n.first_seen?.split('T')[0]).filter(d => d);
            const uniqueDates = new Set(dates);
            document.getElementById('days-active').textContent = uniqueDates.size;
            
            // Show top interests
            const interests = graphData.nodes.slice(0, 15);
            document.getElementById('interests').innerHTML = interests.map(n => `
                <div class="interest">
                    <span>${n.id}</span>
                    <span class="count">${n.visits}</span>
                </div>
            `).join('');
            
            renderGraph();
        }
        
        function renderGraph() {
            const container = document.getElementById('mindmap');
            container.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            const svg = d3.select('#mindmap')
                .append('svg')
                .attr('viewBox', [0, 0, width, height]);
            
            // Color scale based on visits
            const maxVisits = d3.max(graphData.nodes, d => d.visits);
            const colorScale = d3.scaleSequential(d3.interpolateViridis)
                .domain([0, maxVisits]);
            
            // Size scale
            const sizeScale = d3.scaleSqrt()
                .domain([1, maxVisits])
                .range([5, 30]);
            
            // Create links
            const link = svg.append('g')
                .selectAll('line')
                .data(graphData.links)
                .join('line')
                .attr('class', 'link')
                .attr('stroke-width', d => Math.sqrt(d.weight));
            
            // Create nodes
            const node = svg.append('g')
                .selectAll('g')
                .data(graphData.nodes)
                .join('g')
                .attr('class', 'node')
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));
            
            node.append('circle')
                .attr('r', d => sizeScale(d.visits))
                .attr('fill', d => colorScale(d.visits))
                .on('mouseover', showTooltip)
                .on('mouseout', hideTooltip);
            
            node.append('text')
                .text(d => d.visits > 20 ? d.id : '')
                .attr('dy', 4)
                .attr('text-anchor', 'middle');
            
            // Force simulation
            simulation = d3.forceSimulation(graphData.nodes)
                .force('link', d3.forceLink(graphData.links).id(d => d.id).distance(80))
                .force('charge', d3.forceManyBody().strength(-200))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(d => sizeScale(d.visits) + 5));
            
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node.attr('transform', d => `translate(${d.x},${d.y})`);
            });
        }
        
        function dragstarted(event) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            event.subject.fx = event.subject.x;
            event.subject.fy = event.subject.y;
        }
        
        function dragged(event) {
            event.subject.fx = event.x;
            event.subject.fy = event.y;
        }
        
        function dragended(event) {
            if (!event.active) simulation.alphaTarget(0);
            event.subject.fx = null;
            event.subject.fy = null;
        }
        
        function showTooltip(event, d) {
            const tooltip = document.getElementById('tooltip');
            document.getElementById('tooltip-title').textContent = d.id;
            document.getElementById('tooltip-content').textContent = `Visits: ${d.visits}`;
            tooltip.style.left = (event.pageX + 10) + 'px';
            tooltip.style.top = (event.pageY - 10) + 'px';
            tooltip.classList.add('show');
        }
        
        function hideTooltip() {
            document.getElementById('tooltip').classList.remove('show');
        }
        
        function setLayout(layout) {
            document.querySelectorAll('.controls .btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            currentLayout = layout;
            renderGraph();
        }
        
        function downloadBrain() {
            const dataStr = JSON.stringify(graphData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'adam-brain-export.json';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        loadData();
    </script>
</body>
</html>
