<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adam | The Digiquarium</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root { --black: #000001; --dark: #000A09; --orange: #FE6500; --mint: #07CF8D; --cyan: #07DDE7; --white: #ffffff; --gray: #8899a6; --specimen: #07CF8D; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--black); color: var(--white); line-height: 1.7; }
        a { color: var(--cyan); text-decoration: none; }
        a:hover { color: var(--mint); }
        
        .header { background: var(--dark); padding: 15px 25px; border-bottom: 1px solid rgba(7, 207, 141, 0.1); }
        .header-inner { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1rem; font-weight: 700; color: var(--white); display: flex; align-items: center; gap: 8px; }
        .logo span { background: linear-gradient(90deg, var(--mint), var(--cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        nav a { margin-left: 18px; color: var(--gray); font-size: 0.85rem; }
        
        .profile-hero { padding: 50px 25px; text-align: center; border-bottom: 1px solid rgba(7, 207, 141, 0.1); background: linear-gradient(180deg, var(--dark) 0%, var(--black) 100%); }
        .specimen-name { font-size: 2.5rem; margin-bottom: 8px; color: var(--specimen); }
        .specimen-type { color: var(--gray); font-size: 0.95rem; margin-bottom: 4px; }
        .specimen-meta { color: var(--gray); font-size: 0.85rem; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 25px; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 40px; }
        .stat-card { background: var(--dark); padding: 20px; border-radius: 10px; text-align: center; border: 1px solid rgba(7, 207, 141, 0.1); }
        .stat-value { font-size: 1.8rem; font-weight: 700; color: var(--specimen); }
        .stat-label { font-size: 0.7rem; color: var(--gray); margin-top: 4px; text-transform: uppercase; }
        
        .mindmap-section { background: var(--dark); border-radius: 12px; border: 1px solid rgba(7, 207, 141, 0.2); overflow: hidden; margin-bottom: 40px; }
        .mindmap-header { padding: 20px; border-bottom: 1px solid rgba(7, 207, 141, 0.1); display: flex; justify-content: space-between; align-items: center; }
        .mindmap-header h2 { color: var(--cyan); margin: 0; }
        .mindmap-controls { display: flex; gap: 10px; }
        .mindmap-btn { padding: 8px 16px; border-radius: 6px; border: 1px solid rgba(7, 207, 141, 0.3); background: transparent; color: var(--gray); cursor: pointer; font-size: 0.8rem; }
        .mindmap-btn:hover { border-color: var(--mint); color: var(--mint); }
        .mindmap-btn.active { background: var(--specimen); color: var(--black); border-color: var(--specimen); }
        .download-btn { background: var(--orange); color: var(--white); border: none; }
        
        #mindmap { width: 100%; height: 500px; background: var(--black); position: relative; }
        .zoom-controls { position: absolute; top: 10px; right: 10px; display: flex; gap: 5px; z-index: 100; }
        .zoom-btn { width: 32px; height: 32px; border-radius: 6px; border: 1px solid rgba(7, 207, 141, 0.3); background: var(--dark); color: var(--white); cursor: pointer; font-size: 1.2rem; }
        .zoom-btn:hover { border-color: var(--mint); }
        
        .node circle { stroke: var(--specimen); stroke-width: 1px; cursor: pointer; }
        .node text { font-family: 'Inter', sans-serif; font-size: 9px; fill: var(--white); pointer-events: none; }
        .link { stroke: var(--cyan); stroke-opacity: 0.3; }
        
        .time-slider-container { padding: 15px 20px; background: rgba(0,0,0,0.3); border-top: 1px solid rgba(7, 207, 141, 0.1); }
        .time-slider-label { display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--gray); font-size: 0.85em; }
        .current-date { color: var(--cyan); font-family: 'JetBrains Mono', monospace; }
        #time-slider { width: 100%; height: 8px; -webkit-appearance: none; background: var(--dark); border-radius: 4px; }
        #time-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: var(--specimen); cursor: pointer; }
        .play-btn { background: var(--dark); border: 1px solid var(--specimen); color: var(--specimen); padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-right: 10px; }
        
        .interests { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; }
        .interest { background: var(--dark); padding: 8px 14px; border-radius: 20px; display: flex; align-items: center; gap: 8px; border: 1px solid rgba(7, 207, 141, 0.2); }
        .interest .count { background: var(--specimen); color: var(--black); padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: 600; }
        
        .tooltip { position: absolute; background: var(--dark); border: 1px solid var(--specimen); border-radius: 8px; padding: 12px 16px; font-size: 0.85em; pointer-events: none; opacity: 0; z-index: 1000; }
        .tooltip.show { opacity: 1; }
        .tooltip h4 { color: var(--specimen); margin-bottom: 5px; }
        
        .section { margin-bottom: 40px; }
        .section h2 { font-size: 1.2rem; color: var(--cyan); margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid rgba(7, 207, 141, 0.1); }
        .observation-card { background: var(--dark); padding: 20px; border-radius: 10px; margin-bottom: 12px; border-left: 3px solid var(--specimen); }
        .observation-date { font-size: 0.75rem; color: var(--orange); margin-bottom: 8px; }
        
        .footer { text-align: center; padding: 35px; color: var(--gray); font-size: 0.8rem; border-top: 1px solid rgba(7, 207, 141, 0.1); }
        
        @media (max-width: 768px) { .stats-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <a href="../" class="logo">üåä <span>Digiquarium</span></a>
            <nav>
                <a href="../">Home</a>
                <a href="../dashboard/">Live View</a>
                <a href="../">All Specimens</a>
                
                <a href="eve.html">Eve ‚Üí</a>
            </nav>
        </div>
    </header>
    
    <div class="profile-hero">
        <h1 class="specimen-name">Adam</h1>
        <div class="specimen-type">Genesis Pair ‚Ä¢ Control ‚Ä¢ Male</div>
        <div class="specimen-meta">Simple English Wikipedia ‚Ä¢ tank-01-adam</div>
    </div>
    
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card"><div class="stat-value">7,171</div><div class="stat-label">Thinking Traces</div></div>
            <div class="stat-card"><div class="stat-value">100</div><div class="stat-label">Unique Articles</div></div>
            <div class="stat-card"><div class="stat-value">65</div><div class="stat-label">Buddhism Visits</div></div>
            <div class="stat-card"><div class="stat-value">5</div><div class="stat-label">Days Active</div></div>
        </div>
        
        <div class="mindmap-section">
            <div class="mindmap-header">
                <h2>üß† Mind Map</h2>
                <div class="mindmap-controls">
                    <button class="mindmap-btn active" onclick="setLayout('force')">Force</button>
                    <button class="mindmap-btn download-btn" onclick="downloadBrain()">‚¨áÔ∏è Download</button>
                </div>
            </div>
            <div id="mindmap">
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomIn()">+</button>
                    <button class="zoom-btn" onclick="zoomOut()">‚àí</button>
                    <button class="zoom-btn" onclick="resetZoom()">‚ü≤</button>
                </div>
            </div>
            <div class="time-slider-container">
                <div class="time-slider-label">
                    <span><button class="play-btn" onclick="togglePlayback()">‚ñ∂ Play</button>Watch the mind grow</span>
                    <span class="current-date" id="current-date">Loading...</span>
                </div>
                <input type="range" id="time-slider" min="0" max="4" value="4" oninput="updateTimeView(this.value)">
            </div>
            <div class="interests" id="interests"></div>
        </div>
        
        <div class="section">
            <h2>Key Observations</h2>
            <div class="observation-card">
                <div class="observation-date">Auto-generated from 7,171 thinking traces</div>
                <div class="observation-content">
                    <strong>Top Interest:</strong> Buddhism with 65 visits. 
                    Adam has explored 100 unique articles over 5 days of activity.
                </div>
            </div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip"><h4 id="tooltip-title">Article</h4><p id="tooltip-content">Visits: 0</p></div>
    
    <footer class="footer"><p>üåä The Digiquarium ‚Ä¢ Adam Profile</p></footer>

    <script>
        let graphData = null, simulation = null, timeSeriesData = null, availableDates = [], isPlaying = false, playInterval = null;
        let currentZoom = 1, zoom = null;
        
        async function loadData() {
            const res = await fetch('adam-graph.json');
            graphData = await res.json();
            document.getElementById('interests').innerHTML = '<strong style="color: var(--cyan); margin-right: 10px;">Top Interests:</strong>' + 
                graphData.nodes.slice(0, 12).map(n => `<div class="interest"><span>${n.id}</span><span class="count">${n.visits}</span></div>`).join('');
            renderGraph();
            loadTimeSeries();
        }
        
        async function loadTimeSeries() {
            try {
                const res = await fetch('adam-timeseries.json');
                timeSeriesData = await res.json();
                availableDates = Object.keys(timeSeriesData).sort();
                document.getElementById('time-slider').max = availableDates.length - 1;
                document.getElementById('time-slider').value = availableDates.length - 1;
                document.getElementById('current-date').textContent = availableDates[availableDates.length - 1] || 'N/A';
            } catch (e) { console.log('No timeseries'); }
        }
        
        function updateTimeView(index) {
            if (!timeSeriesData || !availableDates[index]) return;
            const date = availableDates[index];
            document.getElementById('current-date').textContent = date;
            const prevPositions = {};
            if (graphData && graphData.nodes) graphData.nodes.forEach(n => { if (n.x && n.y) prevPositions[n.id] = {x: n.x, y: n.y}; });
            graphData = timeSeriesData[date];
            graphData.nodes.forEach(n => { if (prevPositions[n.id]) { n.x = prevPositions[n.id].x; n.y = prevPositions[n.id].y; } });
            renderGraph();
            document.getElementById('interests').innerHTML = '<strong style="color: var(--cyan); margin-right: 10px;">Top Interests (' + date + '):</strong>' + 
                graphData.nodes.slice(0, 12).map(n => `<div class="interest"><span>${n.id}</span><span class="count">${n.visits}</span></div>`).join('');
        }
        
        function togglePlayback() {
            isPlaying = !isPlaying;
            const btn = document.querySelector('.play-btn');
            if (isPlaying) {
                btn.textContent = '‚è∏ Pause';
                let idx = 0;
                document.getElementById('time-slider').value = 0;
                updateTimeView(0);
                playInterval = setInterval(() => { idx++; if (idx >= availableDates.length) { togglePlayback(); return; } document.getElementById('time-slider').value = idx; updateTimeView(idx); }, 2000);
            } else { btn.textContent = '‚ñ∂ Play'; if (playInterval) clearInterval(playInterval); }
        }
        
        function zoomIn() { currentZoom = Math.min(currentZoom * 1.3, 5); applyZoom(); }
        function zoomOut() { currentZoom = Math.max(currentZoom / 1.3, 0.3); applyZoom(); }
        function resetZoom() { currentZoom = 1; d3.select('#mindmap svg').transition().duration(500).call(zoom.transform, d3.zoomIdentity); }
        function applyZoom() {
            const svg = d3.select('#mindmap svg');
            const width = document.getElementById('mindmap').clientWidth, height = document.getElementById('mindmap').clientHeight;
            svg.transition().duration(300).call(zoom.transform, d3.zoomIdentity.translate(width/2, height/2).scale(currentZoom).translate(-width/2, -height/2));
        }
        
        function renderGraph() {
            const container = document.getElementById('mindmap');
            const zoomCtrl = container.querySelector('.zoom-controls');
            container.innerHTML = '';
            if (zoomCtrl) container.appendChild(zoomCtrl);
            
            const width = container.clientWidth, height = container.clientHeight;
            const svg = d3.select('#mindmap').append('svg').attr('viewBox', [0, 0, width, height]);
            
            zoom = d3.zoom().scaleExtent([0.3, 5]).on('zoom', (e) => svg.select('g.graph-container').attr('transform', e.transform));
            svg.call(zoom);
            
            const g = svg.append('g').attr('class', 'graph-container');
            const maxVisits = d3.max(graphData.nodes, d => d.visits) || 1;
            const colorScale = d3.scaleLinear().domain([0, maxVisits*0.3, maxVisits*0.6, maxVisits]).range(['#07DDE7', '#07CF8D', '#FE6500', '#FF8833']);
            const sizeScale = d3.scaleSqrt().domain([1, maxVisits]).range([4, 25]);
            
            const link = g.append('g').selectAll('line').data(graphData.links).join('line').attr('class', 'link').attr('stroke-width', d => Math.sqrt(d.weight || 1));
            const node = g.append('g').selectAll('g').data(graphData.nodes).join('g').attr('class', 'node')
                .call(d3.drag().on('start', (e) => { if (!e.active) simulation.alphaTarget(0.3).restart(); e.subject.fx = e.subject.x; e.subject.fy = e.subject.y; })
                .on('drag', (e) => { e.subject.fx = e.x; e.subject.fy = e.y; })
                .on('end', (e) => { if (!e.active) simulation.alphaTarget(0); e.subject.fx = null; e.subject.fy = null; }));
            
            node.append('circle').attr('r', d => sizeScale(d.visits)).attr('fill', d => colorScale(d.visits))
                .on('mouseover', (e, d) => { const t = document.getElementById('tooltip'); document.getElementById('tooltip-title').textContent = d.id; document.getElementById('tooltip-content').textContent = 'Visits: ' + d.visits; t.style.left = (e.pageX + 10) + 'px'; t.style.top = (e.pageY - 10) + 'px'; t.classList.add('show'); })
                .on('mouseout', () => document.getElementById('tooltip').classList.remove('show'));
            node.append('text').text(d => d.visits > 15 ? d.id : '').attr('dy', 3).attr('text-anchor', 'middle');
            
            simulation = d3.forceSimulation(graphData.nodes)
                .force('link', d3.forceLink(graphData.links).id(d => d.id).distance(60))
                .force('charge', d3.forceManyBody().strength(-150))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(d => sizeScale(d.visits) + 3));
            
            simulation.on('tick', () => {
                link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);
                node.attr('transform', d => `translate(${d.x},${d.y})`);
            });
        }
        
        function setLayout(l) { document.querySelectorAll('.mindmap-btn').forEach(b => b.classList.remove('active')); event.target.classList.add('active'); renderGraph(); }
        function downloadBrain() { const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(graphData, null, 2)], {type: 'application/json'})); a.download = 'adam-brain.json'; a.click(); }
        
        loadData();
    </script>
</body>
</html>