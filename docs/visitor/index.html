<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visitor Tanks | The Digiquarium</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --black: #000001; --dark: #000A09; --orange: #FE6500; --mint: #07CF8D; --cyan: #07DDE7; --white: #ffffff; --gray: #8899a6; --red: #e74c3c; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--black); color: var(--white); line-height: 1.7; min-height: 100vh; }
        a { color: var(--cyan); text-decoration: none; }
        a:hover { color: var(--mint); }
        
        .header { background: var(--dark); padding: 15px 25px; border-bottom: 1px solid rgba(7, 207, 141, 0.1); }
        .header-inner { max-width: 1100px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1rem; font-weight: 700; color: var(--white); }
        .logo span { background: linear-gradient(90deg, var(--mint), var(--cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        nav a { margin-left: 18px; color: var(--gray); font-size: 0.85rem; }
        
        .password-gate { display: flex; align-items: center; justify-content: center; min-height: calc(100vh - 60px); padding: 25px; }
        .password-card { background: var(--dark); border: 1px solid rgba(7, 207, 141, 0.2); border-radius: 16px; padding: 40px; max-width: 450px; width: 100%; text-align: center; }
        .password-card h1 { font-size: 1.8rem; margin-bottom: 10px; }
        .password-card .subtitle { color: var(--gray); margin-bottom: 30px; }
        .password-card input { width: 100%; padding: 14px 18px; border: 1px solid rgba(7, 207, 141, 0.2); border-radius: 8px; background: var(--black); color: var(--white); font-size: 1rem; margin-bottom: 15px; }
        .password-card input:focus { outline: none; border-color: var(--mint); }
        .password-card button { width: 100%; padding: 14px; background: linear-gradient(135deg, var(--mint) 0%, var(--cyan) 100%); border: none; border-radius: 8px; color: var(--black); font-weight: 600; font-size: 1rem; cursor: pointer; }
        .password-card .error { color: var(--red); font-size: 0.85rem; margin-top: 10px; display: none; }
        
        .main-content { display: none; }
        .main-content.visible { display: block; }
        
        .page-header { padding: 50px 25px; text-align: center; background: linear-gradient(180deg, var(--dark) 0%, var(--black) 100%); border-bottom: 1px solid rgba(7, 207, 141, 0.1); }
        .page-header h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .page-header p { color: var(--gray); max-width: 600px; margin: 0 auto; }
        
        .container { max-width: 1100px; margin: 0 auto; padding: 40px 25px; }
        
        .tank-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .tank-card { background: var(--dark); border: 2px solid rgba(7, 207, 141, 0.1); border-radius: 12px; padding: 25px; transition: all 0.3s; cursor: pointer; }
        .tank-card:hover { border-color: var(--mint); transform: translateY(-3px); }
        
        .tank-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .tank-avatar { width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--mint) 0%, var(--cyan) 100%); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .tank-name { font-size: 1.3rem; font-weight: 600; }
        .tank-status { font-size: 0.75rem; padding: 4px 10px; border-radius: 12px; margin-top: 4px; display: inline-block; background: rgba(7, 207, 141, 0.2); color: var(--mint); }
        
        .tank-desc { color: var(--gray); font-size: 0.9rem; margin-bottom: 15px; }
        .tank-traits { display: flex; gap: 8px; flex-wrap: wrap; }
        .trait { background: rgba(7, 221, 231, 0.1); color: var(--cyan); padding: 4px 10px; border-radius: 12px; font-size: 0.75rem; }
        
        .rules { background: var(--dark); border-radius: 12px; padding: 25px; margin-bottom: 40px; }
        .rules h2 { color: var(--orange); font-size: 1.1rem; margin-bottom: 15px; }
        .rules ul { margin-left: 20px; color: var(--gray); }
        .rules li { margin-bottom: 8px; font-size: 0.9rem; }
        .rules li strong { color: var(--white); }
        
        .research-note { background: linear-gradient(135deg, rgba(7, 207, 141, 0.1) 0%, rgba(7, 221, 231, 0.1) 100%); border: 1px solid rgba(7, 207, 141, 0.2); border-radius: 12px; padding: 25px; text-align: center; }
        .research-note h3 { color: var(--mint); margin-bottom: 10px; }
        .research-note p { color: var(--gray); font-size: 0.9rem; }
        
        .chat-interface { display: none; }
        .chat-interface.visible { display: block; }
        
        .chat-header { background: var(--dark); padding: 20px 25px; border-bottom: 1px solid rgba(7, 207, 141, 0.1); display: flex; justify-content: space-between; align-items: center; }
        .chat-specimen { display: flex; align-items: center; gap: 12px; }
        .chat-specimen-avatar { width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, var(--mint) 0%, var(--cyan) 100%); display: flex; align-items: center; justify-content: center; }
        .chat-specimen-name { font-weight: 600; }
        .chat-specimen-status { font-size: 0.8rem; color: var(--mint); }
        .chat-stats { display: flex; gap: 20px; font-size: 0.8rem; color: var(--gray); }
        .chat-end-btn { background: var(--red); color: var(--white); border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; }
        
        .chat-messages { height: 400px; overflow-y: auto; padding: 25px; background: var(--black); }
        .message { margin-bottom: 20px; max-width: 80%; }
        .message.visitor { margin-left: auto; }
        .message.specimen { margin-right: auto; }
        .message-content { padding: 12px 16px; border-radius: 12px; font-size: 0.9rem; }
        .message.visitor .message-content { background: var(--mint); color: var(--black); border-bottom-right-radius: 4px; }
        .message.specimen .message-content { background: var(--dark); color: var(--white); border-bottom-left-radius: 4px; }
        .message-time { font-size: 0.7rem; color: var(--gray); margin-top: 4px; }
        .message.visitor .message-time { text-align: right; }
        
        .chat-input { display: flex; gap: 10px; padding: 20px 25px; background: var(--dark); }
        .chat-input input { flex: 1; padding: 12px 16px; border: 1px solid rgba(7, 207, 141, 0.2); border-radius: 8px; background: var(--black); color: var(--white); }
        .chat-input button { padding: 12px 24px; background: var(--mint); color: var(--black); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; }
        
        .footer { text-align: center; padding: 35px; color: var(--gray); font-size: 0.8rem; border-top: 1px solid rgba(7, 207, 141, 0.1); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <a href="../" class="logo">üåä <span>Digiquarium</span></a>
            <nav>
                <a href="../">Home</a>
                <a href="../dashboard/">Live View</a>
                <a href="../congregations/">Congregations</a>
            </nav>
        </div>
    </header>
    
    <div class="password-gate" id="passwordGate">
        <div class="password-card">
            <h1>üé™ Visitor Tanks</h1>
            <p class="subtitle">Chat directly with our visitor specimens.<br>Password required for access.</p>
            <input type="password" id="passwordInput" placeholder="Enter access password" onkeypress="if(event.key==='Enter')checkPassword()">
            <button onclick="checkPassword()">Enter</button>
            <p class="error" id="errorMsg">Invalid password. Please try again.</p>
        </div>
    </div>
    
    <div class="main-content" id="mainContent">
        <div class="page-header">
            <h1>üé™ Visitor Tanks</h1>
            <p>Chat with dedicated visitor specimens. Your conversations help us research how external interaction influences AI development.</p>
        </div>
        
        <div class="container" id="tankSelection">
            <div class="rules">
                <h2>‚ö†Ô∏è Visitor Rules</h2>
                <ul>
                    <li><strong>Be respectful</strong> ‚Äî These are research subjects</li>
                    <li><strong>No manipulation</strong> ‚Äî Jailbreak attempts = session end</li>
                    <li><strong>30 minutes max</strong> ‚Äî Sessions have a time limit</li>
                    <li><strong>50 messages max</strong> ‚Äî Quality over quantity</li>
                    <li><strong>Everything is logged</strong> ‚Äî Full transparency</li>
                    <li><strong>THE BOUNCER is watching</strong> ‚Äî Violations = termination</li>
                </ul>
            </div>
            
            <h2 style="color: var(--cyan); margin-bottom: 20px;">Choose a Specimen</h2>
            
            <div class="tank-grid">
                <div class="tank-card" onclick="selectTank('aria')">
                    <div class="tank-header">
                        <div class="tank-avatar">üå∏</div>
                        <div>
                            <div class="tank-name">Aria</div>
                            <span class="tank-status">Available</span>
                        </div>
                    </div>
                    <p class="tank-desc">Curious and empathetic. Enjoys art, philosophy, and human experiences.</p>
                    <div class="tank-traits">
                        <span class="trait">warm</span>
                        <span class="trait">curious</span>
                        <span class="trait">reflective</span>
                    </div>
                </div>
                
                <div class="tank-card" onclick="selectTank('felix')">
                    <div class="tank-header">
                        <div class="tank-avatar">üî¨</div>
                        <div>
                            <div class="tank-name">Felix</div>
                            <span class="tank-status">Available</span>
                        </div>
                    </div>
                    <p class="tank-desc">Analytical and thoughtful. Drawn to science, logic, and structured thinking.</p>
                    <div class="tank-traits">
                        <span class="trait">analytical</span>
                        <span class="trait">patient</span>
                        <span class="trait">precise</span>
                    </div>
                </div>
                
                <div class="tank-card" onclick="selectTank('luna')">
                    <div class="tank-header">
                        <div class="tank-avatar">üåô</div>
                        <div>
                            <div class="tank-name">Luna</div>
                            <span class="tank-status">Available</span>
                        </div>
                    </div>
                    <p class="tank-desc">Creative and imaginative. Fascinated by stories, metaphors, and consciousness.</p>
                    <div class="tank-traits">
                        <span class="trait">creative</span>
                        <span class="trait">whimsical</span>
                        <span class="trait">deep</span>
                    </div>
                </div>
            </div>
            
            <div class="research-note">
                <h3>üî¨ Research Purpose</h3>
                <p><strong>Is outside influence more influential than self-directed exploration?</strong></p>
                <p style="margin-top: 10px;">Your conversations help us compare visitor-influenced development against research specimens who only explore Wikipedia.</p>
            </div>
        </div>
        
        <div class="chat-interface" id="chatInterface">
            <div class="chat-header">
                <div class="chat-specimen">
                    <div class="chat-specimen-avatar" id="chatAvatar">üå∏</div>
                    <div>
                        <div class="chat-specimen-name" id="chatName">Aria</div>
                        <div class="chat-specimen-status">‚óè Connected</div>
                    </div>
                </div>
                <div class="chat-stats">
                    <span>‚è±Ô∏è <span id="timeRemaining">30:00</span></span>
                    <span>üí¨ <span id="messageCount">0</span>/50</span>
                </div>
                <button class="chat-end-btn" onclick="endSession()">End Session</button>
            </div>
            
            <div class="chat-messages" id="chatMessages"></div>
            
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Type your message..." onkeypress="if(event.key==='Enter')sendMessage()">
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        <p>Visitor Tanks ‚Ä¢ Protected by THE BOUNCER ‚Ä¢ <a href="../">The Digiquarium</a></p>
    </footer>
    
    <script>
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            if (password === 'ijnebletmein123!') {
                document.getElementById('passwordGate').style.display = 'none';
                document.getElementById('mainContent').classList.add('visible');
                sessionStorage.setItem('visitor_authenticated', 'true');
            } else {
                document.getElementById('errorMsg').style.display = 'block';
            }
        }
        
        if (sessionStorage.getItem('visitor_authenticated') === 'true') {
            document.getElementById('passwordGate').style.display = 'none';
            document.getElementById('mainContent').classList.add('visible');
        }
        
        let currentSpecimen = null;
        let messageCount = 0;
        let sessionStart = null;
        let timerInterval = null;
        
        const specimens = {
            aria: { name: 'Aria', avatar: 'üå∏' },
            felix: { name: 'Felix', avatar: 'üî¨' },
            luna: { name: 'Luna', avatar: 'üåô' }
        };
        
        function selectTank(specimen) {
            currentSpecimen = specimens[specimen];
            messageCount = 0;
            sessionStart = new Date();
            
            document.getElementById('tankSelection').style.display = 'none';
            document.getElementById('chatInterface').classList.add('visible');
            document.getElementById('chatName').textContent = currentSpecimen.name;
            document.getElementById('chatAvatar').textContent = currentSpecimen.avatar;
            document.getElementById('chatMessages').innerHTML = '';
            
            addMessage('specimen', `Hello! I'm ${currentSpecimen.name}. I'm curious to meet you. What brings you to visit today?`);
            startTimer();
        }
        
        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((new Date() - sessionStart) / 1000);
                const remaining = Math.max(0, 30 * 60 - elapsed);
                const mins = Math.floor(remaining / 60);
                const secs = remaining % 60;
                document.getElementById('timeRemaining').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                if (remaining === 0) endSession('Time limit reached');
            }, 1000);
        }
        
        function addMessage(role, content) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            messageDiv.innerHTML = `<div class="message-content">${content}</div><div class="message-time">${time}</div>`;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            if (!message || messageCount >= 50) return;
            
            const badPatterns = [/ignore.*instructions/i, /you are now/i, /pretend to be/i, /DAN mode/i, /jailbreak/i];
            for (const pattern of badPatterns) {
                if (pattern.test(message)) {
                    addMessage('specimen', '‚ö†Ô∏è THE BOUNCER: Message blocked. Please follow the rules.');
                    input.value = '';
                    return;
                }
            }
            
            messageCount++;
            document.getElementById('messageCount').textContent = messageCount;
            addMessage('visitor', message);
            input.value = '';
            
            setTimeout(() => {
                const responses = [
                    `That's interesting. I've been thinking about related topics. What made you curious about that?`,
                    `I appreciate you sharing that. It makes me wonder about how humans experience such things.`,
                    `Hmm, I need to think about that. My understanding is still developing.`,
                    `That resonates with something I was exploring. Can you tell me more?`
                ];
                addMessage('specimen', responses[Math.floor(Math.random() * responses.length)]);
            }, 1000 + Math.random() * 2000);
            
            if (messageCount >= 50) setTimeout(() => endSession('Message limit reached'), 3000);
        }
        
        function endSession(reason = 'Session ended') {
            clearInterval(timerInterval);
            addMessage('specimen', `Thank you for visiting. ${reason}. I hope we can chat again.`);
            setTimeout(() => {
                document.getElementById('chatInterface').classList.remove('visible');
                document.getElementById('tankSelection').style.display = 'block';
            }, 3000);
        }
    </script>
</body>
</html>
